{% extends "students/base.html" %}

{% load static from staticfiles %}

{% block meta_title %}Студенти{% endblock meta_title %}

{% block title %}База Студентів {% endblock title %}


<!--
{% block subheader %}
         Start subheader 
        <div class="row" id="sub-header"> 
          <div class="col-xs-12">
            <ul class="nav nav-tabs" role="tablist">
              <li role="presentation" class="active"><a href={% url "home" %}>Студенти</a></li>
              <li role="presentation"><a href="/journal">Відвідування</a></li>
              <li role="presentation"><a href={% url "groups" %}>Групи</a></li>
            </ul>
          </div>
        </div>
{% endblock subheader %}
-->

 {% block status_message %}

    {% if messages %}
        <div class="alert alert-success">
            {% for message in messages %}
                {{ message }}
            {% endfor %}
        </div>
 {% endif %}

 {% endblock status_message %}

{% block content %}
<!--<style type="text/css">.col-xs-12, .col-xs-4, .col-xs-6 {border: 1px solid red;}</style>-->
<!-- Add Student Button -->
<div class="col-xs-7 " style="margin: 2% 0 2% 0">
  <a class="btn btn-primary " href={% url "students_add" %}>Додати Студента</a>
  
</div>



<!-- Start Students Listing &uarr;-->
          <table class="table">
           {% with order_by=request.GET.order_by reverse=request.GET.reverse %}
            <thead>
              <tr>

                <th><a href="{% url "home" %}?order_by=id{% if order_by == 'id' and reverse != '1' %}&amp;reverse=1{% endif %}">№
                  {% if order_by == 'id' and reverse != '1' %}&uarr;
                  {%elif order_by == 'id' and reverse == '1' %}&darr;
                  {% endif %}
                </a></th>
    
                <th>Фото</th>
                <th><a href="{% url "home" %}?order_by=last_name{% if reverse != '1'%}&amp;reverse=1{% endif %}">Прізвище
                  {% if order_by == ''  %}&uarr;
                    {% elif order_by == 'last_name' and reverse != '1' %}&uarr;
                    {% elif order_by == 'last_name' and reverse == '1' %}&darr;
                  {% endif %}
                </a></th>
                <th><a href="{% url "home" %}?order_by=first_name{% if order_by == 'first_name' and reverse != '1' %}&amp;reverse=1 {% endif %} ">Ім'я
<!--                {% if request.GET.order_by == 'first_name' %}&uarr;{% endif %}-->
                  {% if order_by == 'first_name' and reverse != '1' %}&uarr;
                  {%elif order_by == 'first_name' and reverse == '1' %}&darr;
                  {% endif %}
                </a></th>
                <th><a href="{% url "home" %}?order_by=ticket{% if order_by == 'ticket' and reverse != '1' %}&amp;reverse=1 {% endif %}">№ Билета
<!--                {% if request.GET.order_by == 'ticket' %}&uarr;{% endif %}-->
                  {% if order_by == 'ticket' and reverse != '1' %}&uarr;
                  {%elif order_by == 'ticket' and reverse == '1' %}&darr;
                  {% endif %}
                </a></th>
                <th>Діі</th>
              </tr>
            </thead>
            {% endwith %}
            <tbody>
<!--             Оновлено посилання на дии над студентом-->
        {% for student in students %}
              <tr>
                <td>{{ students.start_index|add:forloop.counter0 }}</td> 
                {# <td>{{ students.number|add:forloop.counter0  }}</td>  #}
<!--                <td>{{forloop.revcounter}}</td>-->
<!--                <td><img class="img-circle" height="30" width="30" src={% static student.image %} /></td>-->
               <td>
                {% if student.photo %}
               <img class="img-circle" height="30" width="30" src={{student.photo.url}} />
               {% else %}
                  <img class="img-circle" height="30" width="30" src={% static "img/default.jpg" %} />

<!--                  <img class="img-circle" height="30" width="30" src={% static "img/default_user.jpg" %} />-->
               {% endif %}
               </td>
               
<!--                 {% static "css/main.css" %}-->
<!--               добавил две кавыычки в хреф-->
                <td><a href={% url 'students_edit' student.id %} class="student-edit-form-link">{{ student.last_name }}</td> 
                <td><a href="{% url "students_edit" student.id %}" class="student-edit-form-link">{{ student.first_name }}</td>
<!--
              <td><a title="Р􏰃􏰉􏰎􏰋􏰈􏰊􏰎􏰂􏰅едагувати" href={% url 'students_edit' student.id %}>{{ student.last_name }}</a></td> 
              <td><a title="Р􏰃􏰉􏰎􏰋􏰈􏰊􏰎􏰂􏰅едагувати" href={% url "students_edit" student.id %}>{{ student.first_name }}􏰓</a></td>
-->
                <td>{{ student.ticket }}</td> 
                <td>
                  <div class="btn-group">
<!--                <div class="btn-group">-->
                    <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">Дія
                      <span class="caret"></span>
                    </button>
                  <ul class="dropdown-menu" role="menu">
                        <li role="presentation">
                          <a role="menuitem" tabindex="-1" 
                            href="{% url "journal" student.id %}">Відвідування</a>
                            {# href="/journal/{{ student.id }}">Відвідування</a> #}
                        </li>
                        <li role="presentation">
                          <a role="menuitem" tabindex="-1" 
                            href={% url "students_edit" student.id %} class="student-edit-form-link">Редагувати</a>
                        </li>
                        <li role="presentation">
                          <a role="menuitem" tabindex="-1" 
                            href={% url "students_delete" student.id %}>Видалити</a>
                        </li>
                  </ul>
                </div>
              </td>
            </tr>
            {% endfor %}
            
          </tbody>
        </table>
<!-- End Students Listing -->

{% include 'students/pagination_students.html' %}
<!--Navigation by page start-->
<!--
          <nav>
            <ul class="pagination">
              <li><a href="#">&laquo;</a></li>
              <li><a href="#">1</a></li>
              <li class="active"><a href="#">2</a></li> 
              <li><a href="#">3</a></li>
              <li><a href="#">4</a></li>
              <li><a href="#">5</a></li>
              <li><a href="#">&raquo;</a></li>
            </ul> 
          </nav>
-->
    
<!--Navigation by page end-->
          
{% endblock content %}


<!-- End Main Page Content -->

